<!-- Title -->
<h1>Livros</h1>

<!-- Button -->
<div class="w-100 mb-3">
  <button (click)="display = true" mat-raised-button color="primary" class="">
    Novo
  </button>
</div>

<!-- Table -->
<mat-table [dataSource]="livros" class="mat-elevation-z8">
  <!-- Header and Row Declarations -->
  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

  <!-- User name Definition -->
  <ng-container matColumnDef="nome">
    <mat-header-cell *matHeaderCellDef> Nome </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.nome }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="ISBN">
    <mat-header-cell *matHeaderCellDef> ISBN </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.ISBN }} </mat-cell>
  </ng-container>

  <!-- Age Definition -->
  <ng-container matColumnDef="anoDePublicacao">
    <mat-header-cell *matHeaderCellDef> Ano de Publicação </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.anoDePublicacao }} </mat-cell>
  </ng-container>

  <!-- Title Definition -->
  <ng-container matColumnDef="editora">
    <mat-header-cell *matHeaderCellDef> Editora </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.editora }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="biografia">
    <mat-header-cell *matHeaderCellDef> Biografia </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.biografia }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="autor">
    <mat-header-cell *matHeaderCellDef> Autor </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.autor.nome }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="quantidadeExemplares">
    <mat-header-cell *matHeaderCellDef>
      Quantidade de Exemplares
    </mat-header-cell>
    <mat-cell *matCellDef="let row"> {{ row.quantidadeExemplares }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="acoes">
    <mat-header-cell *matHeaderCellDef style="width: 180px">
      Ações
    </mat-header-cell>
    <mat-cell *matCellDef="let row" style="width: 180px">
      <button
        (click)="handleClickEditar(row)"
        mat-raised-button
        color="accent"
        class="me-2"
      >
        Editar
      </button>
      <button
        (click)="confirmarExclusao($event, row)"
        mat-raised-button
        color="warn"
        class=""
      >
        Excluir
      </button>
    </mat-cell>
  </ng-container>
</mat-table>

<!-- Modal -->
<p-dialog
  header="Adicionar Livro"
  [(visible)]="display"
  [modal]="true"
  [style]="{ width: '70vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <app-adicionar-livro [(novoLivro)]="novoLivro"></app-adicionar-livro>
  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-check"
      (click)="handleClickConcluir()"
      label="Concluir"
      styleClass="p-button-text"
    ></p-button>
  </ng-template>
</p-dialog>

<!-- Toast -->
<p-toast></p-toast>

<!-- Confirmação -->
<p-confirmPopup></p-confirmPopup>
